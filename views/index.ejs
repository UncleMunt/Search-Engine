<!-- index.ejs -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Movies</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <!-- Link to external CSS file -->
  </head>
  <body
    style="
      background-color: #88ccf1;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    "
  >
    <!-- Heading for the page -->
    <br />

    <!-- Creating a search bar, with filter options -->
    <form
      action="search"
      method="GET"
      class="d-flex p-2"
      style="flex-wrap: wrap; gap: 20px; justify-content: space-around"
    >
      <h1>Movies</h1>
      <!-- Text input for search -->
      <input
        type="text"
        name="query"
        placeholder="Search..."
        style="height: 50px; width: 250px"
      />
      <!-- Filters -->

      <select
        name="filter"
        class="form-select"
        multiple
        aria-label="multiple select example"
        style="width: 200px"
      >
        <option value="title">title</option>
        <option value="runtime">runtime</option>
        <option value="released">released</option>
        <option value="imdb">imdb</option>
      </select>
      <select
        name="genres"
        class="form-select"
        multiple
        aria-label="multiple select example"
        style="width: 200px"
      >
        <option value="">All Genre</option>
        <option value="Horror">Horror</option>
        <option value="Drama">Drama</option>
        <option value="Action">Action</option>
        <option value="Comedy">Comedy</option>
        <option value="Western">Western</option>
        <option value="Short">Short</option>
        <option value="History">History</option>
        <option value="Animation">Animation</option>
        <option value="Fantasy">Fantasy</option>
        <option value="Romance">Romance</option>
      </select>
      <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <hr class="border border-primary border-3 opacity-75" />
    <div
      class="d-flex p-2"
      style="flex-wrap: wrap; gap: 20px; justify-content: space-around"
    >
      <% movies.forEach((movie) => { %>
      <div
        class="card"
        style="
          width: 350px;
          background-color: #c1dff0;
          box-shadow: 2px 2px 5px gray;
          font-size: small;
          align-items: center;
          justify-content: space-around;
        "
      >
        <!-- Loop through the list of movies -->
        <h2><%= movie.title %></h2>
        <!-- Movie title -->
        <p><%= movie.plot %></p>
        <!-- Movie plot summary -->
        <ul>
          <% movie.genres.forEach((genre) => { %>
          <!-- Loop through the movie's genres -->
          <li><%= genre %></li>
          <!-- Display each genre in a list item -->
          <% }) %>
        </ul>
        <p>Runtime: <%= movie.runtime %> minutes</p>
        <!-- Movie runtime in minutes -->
        <p>Rated: <%= movie.rated %></p>
        <!-- Movie imdb rating-->
        <p>IMDB: <%= movie.imdb.rating %></p>
        <!-- Movie rating -->
        <% if (movie.released) { %>
        <!-- Check if the movie's release date is defined -->
        <p>Released: <%= movie.released.toDateString() %></p>
        <!-- Movie release date -->
        <% } %>
        <p>Countries: <%= movie.countries.join(', ') %></p>
        <!-- List of countries where the movie was produced -->
      </div>
      <% }) %>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
      integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
